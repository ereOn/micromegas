<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Tracing crate"><title>micromegas_tracing - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-aa0817cf.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="micromegas_tracing" data-themes="" data-resource-suffix="" data-rustdoc-version="1.90.0 (1159e78c4 2025-09-14)" data-channel="1.90.0" data-search-js="search-fa3e91e5.js" data-settings-js="settings-5514c975.js" ><script src="../static.files/storage-68b7e25d.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-eebb9057.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../micromegas_tracing/index.html">micromegas_<wbr>tracing</a><span class="version">0.15.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#examples" title="Examples">Examples</a></li></ul><h3><a href="#modules">Crate Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#macros" title="Macros">Macros</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>micromegas_tracing</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/micromegas_tracing/lib.rs.html#1-98">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Tracing crate</p>
<p>Provides logging, metrics, memory and performance profiling</p>
<p>Have the lowest impact on the critical path of execution while providing great
visibility, <code>tracing</code> focusses on providing predictable performance for high
performance applications. It was originaly designed for video game engines.</p>
<p>Contrary to other tracing crates, tracing does not provide hooks for individual
events but rather a stream of events, internally it leverages transit
to serialize the events into a binary format. meant to be consumed later on in process
but can also be sent efficiently over the wire.</p>
<h2 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>micromegas_tracing::{
   span_scope, info, warn, error, debug, imetric, fmetric, guards, event,
};

<span class="comment">// Initialize tracing, here with a null event sink, see `lgn-telemetry-sink` crate for a proper implementation
// libraries don't need (and should not) setup any TracingSystemGuard
</span><span class="kw">let </span>_tracing_guard = guards::TracingSystemGuard::new(
    <span class="number">8 </span>* <span class="number">1024 </span>* <span class="number">1024</span>,
    <span class="number">1024 </span>* <span class="number">1024</span>,
    <span class="number">16 </span>* <span class="number">1024 </span>* <span class="number">1024</span>,
    std::sync::Arc::new(event::NullEventSink {}),
    std::collections::HashMap::new(),
    <span class="bool-val">true</span>, <span class="comment">// Enable CPU tracing
</span>);
<span class="kw">let </span>_thread_guard = guards::TracingThreadGuard::new();

<span class="comment">// Create a span scope, this will complete when the scope is dropped, and provide the time spent in the scope
// Behind the scene this uses a thread local storage
// on an i9-11950H this takes around 40ns
</span><span class="macro">span_scope!</span>(<span class="string">"main"</span>);

<span class="comment">// Logging
</span><span class="macro">info!</span>(<span class="string">"Hello world"</span>);
<span class="macro">warn!</span>(<span class="string">"Hello world"</span>);
<span class="macro">error!</span>(<span class="string">"Hello world"</span>);
<span class="macro">debug!</span>(<span class="string">"Hello world"</span>);

<span class="comment">// Metrics
</span><span class="macro">imetric!</span>(<span class="string">"name"</span>, <span class="string">"unit"</span>, <span class="number">0</span>);
<span class="macro">fmetric!</span>(<span class="string">"name"</span>, <span class="string">"unit"</span>, <span class="number">0.0</span>);</code></pre></div>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="dispatch/index.html" title="mod micromegas_tracing::dispatch">dispatch</a></dt><dd>Where events are recorded and eventually sent to a sink</dd><dt><a class="mod" href="errors/index.html" title="mod micromegas_tracing::errors">errors</a></dt><dd>Error types and handling for tracing operations</dd><dt><a class="mod" href="event/index.html" title="mod micromegas_tracing::event">event</a></dt><dd>Structure to record events in memory</dd><dt><a class="mod" href="flush_monitor/index.html" title="mod micromegas_tracing::flush_monitor">flush_<wbr>monitor</a></dt><dd>FlushMonitor triggers the flush of the telemetry streams at regular interval.</dd><dt><a class="mod" href="guards/index.html" title="mod micromegas_tracing::guards">guards</a></dt><dd>RAII-style guards</dd><dt><a class="mod" href="intern_string/index.html" title="mod micromegas_tracing::intern_string">intern_<wbr>string</a></dt><dd>Store dynamically-created strings in a global container.
Strings are never released from the container.</dd><dt><a class="mod" href="levels/index.html" title="mod micromegas_tracing::levels">levels</a></dt><dd>Verbosity management</dd><dt><a class="mod" href="logs/index.html" title="mod micromegas_tracing::logs">logs</a></dt><dd>Events representing a process’s log</dd><dt><a class="mod" href="metrics/index.html" title="mod micromegas_tracing::metrics">metrics</a></dt><dd>Events representing a measured scalar at a point in time</dd><dt><a class="mod" href="panic_hook/index.html" title="mod micromegas_tracing::panic_hook">panic_<wbr>hook</a></dt><dd>Reports panics as fatal log entries and shuts down the telemetry system</dd><dt><a class="mod" href="parsing/index.html" title="mod micromegas_tracing::parsing">parsing</a></dt><dd>Manual parsing of dynamically sized events</dd><dt><a class="mod" href="prelude/index.html" title="mod micromegas_tracing::prelude">prelude</a></dt><dd>Commonly used items for convenient importing - includes macros, types, and traits</dd><dt><a class="mod" href="process_info/index.html" title="mod micromegas_tracing::process_info">process_<wbr>info</a></dt><dd>Process metadata</dd><dt><a class="mod" href="property_set/index.html" title="mod micromegas_tracing::property_set">property_<wbr>set</a></dt><dd>Interned collection of PropertySet instances. Each PropertySet contains properties where the names and the values are statically allocated.
The user is expected to manage the cardinality.</dd><dt><a class="mod" href="runtime/index.html" title="mod micromegas_tracing::runtime">runtime</a></dt><dd>Runtime integration utilities for micromegas tracing</dd><dt><a class="mod" href="spans/index.html" title="mod micromegas_tracing::spans">spans</a></dt><dd>Events reprensenting units of code execution</dd><dt><a class="mod" href="static_string_ref/index.html" title="mod micromegas_tracing::static_string_ref">static_<wbr>string_<wbr>ref</a></dt><dd>StaticStringRef points to a string dependency keeping track of the codec.
Necessary for unreal instrumentation where ansi and wide strings can coexist.
In cases where the event format does not have to be compatible with unreal, StringId can be used.</dd><dt><a class="mod" href="string_id/index.html" title="mod micromegas_tracing::string_id">string_<wbr>id</a></dt><dd>StringId serializes the value of the pointer and the size of a UTF8 string.
StaticStringRef should be prefered where wire compatibility with unreal is important.</dd><dt><a class="mod" href="test_utils/index.html" title="mod micromegas_tracing::test_utils">test_<wbr>utils</a></dt><dd>Test utilities for in-memory tracing in unit tests</dd><dt><a class="mod" href="time/index.html" title="mod micromegas_tracing::time">time</a></dt><dd>System &amp; monotonic tick count</dd></dl><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">§</a></h2><dl class="item-table"><dt><a class="macro" href="macro.debug.html" title="macro micromegas_tracing::debug">debug</a></dt><dd>Logs a message at the debug level.</dd><dt><a class="macro" href="macro.error.html" title="macro micromegas_tracing::error">error</a></dt><dd>Logs a message at the error level.</dd><dt><a class="macro" href="macro.fatal.html" title="macro micromegas_tracing::fatal">fatal</a></dt><dd>Logs a message representing a crash or panic</dd><dt><a class="macro" href="macro.fmetric.html" title="macro micromegas_tracing::fmetric">fmetric</a></dt><dd>Records a float metric.</dd><dt><a class="macro" href="macro.imetric.html" title="macro micromegas_tracing::imetric">imetric</a></dt><dd>Records a integer metric.</dd><dt><a class="macro" href="macro.info.html" title="macro micromegas_tracing::info">info</a></dt><dd>Logs a message at the info level.</dd><dt><a class="macro" href="macro.instrument_named.html" title="macro micromegas_tracing::instrument_named">instrument_<wbr>named</a></dt><dd>Instruments a future with a named span.
Usage: <code>instrument_named!(future, "span_name")</code></dd><dt><a class="macro" href="macro.log.html" title="macro micromegas_tracing::log">log</a></dt><dd>The standard logging macro.</dd><dt><a class="macro" href="macro.log_enabled.html" title="macro micromegas_tracing::log_enabled">log_<wbr>enabled</a></dt><dd>Determines if a message logged at the specified level in that module will
be logged.</dd><dt><a class="macro" href="macro.span_async_named.html" title="macro micromegas_tracing::span_async_named">span_<wbr>async_<wbr>named</a></dt><dd>Instruments an async block with a named span using a static string.
This creates both the SpanLocation and instruments the future in one macro call.</dd><dt><a class="macro" href="macro.span_scope.html" title="macro micromegas_tracing::span_scope">span_<wbr>scope</a></dt><dd>Records a sync span as two thread events</dd><dt><a class="macro" href="macro.span_scope_named.html" title="macro micromegas_tracing::span_scope_named">span_<wbr>scope_<wbr>named</a></dt><dd>Records a span with a name that is determined at runtime.
The span name still needs to be statically allocated.</dd><dt><a class="macro" href="macro.static_span_desc.html" title="macro micromegas_tracing::static_span_desc">static_<wbr>span_<wbr>desc</a></dt><dt><a class="macro" href="macro.static_span_location.html" title="macro micromegas_tracing::static_span_location">static_<wbr>span_<wbr>location</a></dt><dd>Creates a static SpanLocation for use with named async spans.
This is an internal implementation detail - users should use <code>instrument_named!</code> instead.</dd><dt><a class="macro" href="macro.trace.html" title="macro micromegas_tracing::trace">trace</a></dt><dd>Logs a message at the trace level.</dd><dt><a class="macro" href="macro.warn.html" title="macro micromegas_tracing::warn">warn</a></dt><dd>Logs a message at the warn level.</dd></dl><script type="text/json" id="notable-traits-data">{"&[u8]":"<h3>Notable traits for <code>&amp;[<a class=\"primitive\" href=\"https://doc.rust-lang.org/1.90.0/std/primitive.u8.html\">u8</a>]</code></h3><pre><code><div class=\"where\">impl <a class=\"trait\" href=\"https://doc.rust-lang.org/1.90.0/std/io/trait.Read.html\" title=\"trait std::io::Read\">Read</a> for &amp;[<a class=\"primitive\" href=\"https://doc.rust-lang.org/1.90.0/std/primitive.u8.html\">u8</a>]</div>"}</script></section></div></main></body></html>